# 프로젝트 구현 과정에서 배우는 학습 내용
```Vue```, ```Python```을 이번 기회에 처음 다루어보며 이를 이해하기 위해 학습 장소를 만들었습니다.   

---

## Vue
### `src/router/index.ts` (페이지 경로 설정)
웹 사이트의 지도 또는 교통 표지판의 역할을 한다. 어떤 URL 주소로 접속했을 때 어떤 Vue 페이지 컴포넌트를 보여줄지 규칙을 정한다.

- `routes`: 배열 안에 각 페이지의 경로 정보를 객체 형태로 정의
- `path`: '/'는 웹 사이트의 가장 기본 주소이며, 이 주소로 접속하면 첫 번째 Home 컴포넌트를 출력

```typescript
예시.

import { createRouter, createWebHistory } from "vue-router";
import Home from "../pages/Home.vue";
import MoodSelect from "../pages/MoodSelect.vue";

const routes = [
  {
    path: "/",
    name: "Home",
    component: Home,
  },
  {
    path: "/mood-select",
    name: "MoodSelect",
    component: MoodSelect,
  },
];

const router = createRouter({
  history: createWebHistory(),
  routes,
});

export default router;
```

### <router-view />
빈 캔버스와 같은 역할을 한다. 위에서 설정한 `router/index.ts` 규칙에 따라 현재 URL에 맞는 페이지 컴포넌트가 이 자리에 그려진다.

---

### template와 script
`<template>`은 로고, 버튼 등 화면에 보이는 UI를 정의하고, `<script setup lang="ts">`는 Vue 3에서 스크립트를 작성하는 공간이다.   

`<script>`는 Composition API으로 관련 있는 코드(예. 버튼 동작 로직)들을 한 곳에 모아 작성하기 편리하고, 코드가 길어지고 복잡해져도 유지보수하기 좋다.   


```vue
<template>
  ...<div></div>
</template>

<script setup lang="ts">
  ...const a = () {

  }
</script>
```

---

### useRoute(), v-for, :class
`useRoute()`는 현재 페이지의 URL 정보를 가져오는 기능이다. `route.query`를 통해 다른 컴포넌트에서 넘겨준 데이터에 접근할 수 있다.   

`v-for`는 배열에 있는 여러 개의 데이터를 하나씩 꺼내어 사용하며, 일일이 만들 필요 없이 자동으로 생성해주는 Vue의 편리한 반복문이다.   

`:class`는 사용자가 버튼을 클릭했는지, 또는 배열에 포함되었는지 여부에 따라 버튼의 CSS 클래스를 동적으로 바꿔주는 기능이다.

```vue
<template>
  <div class="grid grid-cols-3 gap-3 w-[80%] max-w-3xl">
    <button
      v-for="(mood, idx) in moods"
      :key="idx"
      @click="toggleMood(idx)"
      class="flex items-center justify-center border border-gray-300 rounded-full py-3 px-6 transition text-sm cursor-pointer whitespace-nowrap"
      :class="[selectedMoods.includes(idx) ? 'bg-blue-600 text-white' : 'bg-white text-gray-800 hover:bg-gray-100']"
    >
      {{ mood }}
    </button>
  </div>
</template>
```

---

### 반응형과 `ref`
Vue의 가장 강력한 특징으로, `ref`로 감싸진 변수의 값이 바뀌면, Vue는 그 변수를 사용하고 있는 모든 화면(HTML)을 알아서 다시 그린다. 개발자가 직접 "이것을 해라"라고 명령할 필요 없이 매우 편리하다.

### Vue 디렉티브 (`v-if`, `@click`, `:class` 등)
HTML 태그 안에서 `v-` 또는 `@`, `:`로 시작하는 특별한 속성들이다. Vue에게 "이 부분은 특별하게 처리하라!"라고 알려주는 역할이다.

- `v-if="조건"`: 조건이 참(true)일 때만 이 태그를 화면에 그리기
- `v-for="아이템 in 배열"`: 배열에 있는 아이템 개수만큼 태그를 반복해서 생성
- `@click="함수"`: 이 태그를 클릭했을 때 지정된 함수를 실행 (@ = `v-on`)
- `:class="조건"`: 조건에 따라 태그의 CSS 클래스를 다르게 적용 (`:` = `v-bind`)

### `src/main.ts` - Vue 앱 초기화
`Vue` 앱을 실제로 생성하고, 필요한 플러그인(Router 등)을 연결한 뒤, `index.html`의 `<div id="app"></div>`에 부착하는, 앱의 '시동'을 거는 파일이다.

- `import { createApp } from "vue";`: Vue에서 앱을 만드는 `createApp` 함수 가져오기
- `import router from "./router";`: `router/index.ts`에서 설정한 페이지 경로 규칙(라우터)을 가져오기
- `createApp(App)`: `App.vue`를 기반으로 Vue 앱 인스턴스 생성
- `.use(router)`: 생성된 앱에 라우터 기능을 사용할 수 있도록 연결
- `.mount("#app")`: 모든 준비가 끝난 앱을 `index.html`에 있는 id가 `app`인 요소에 최종적으로 부착하여 화면에 표시

```typescript
import { createApp } from "vue";
import App from "./App.vue";
import router from "./router";
import "./assets/main.css";

createApp(App).use(router).mount("#app");
```

### 컴포넌트 상태 관리 - `ref`
"지금 로딩 중인가?"와 같은 컴포넌트의 현재 상태를 기억하고, 이 상태가 변화할 때 화면도 함께 바뀌게 만들어야 한다.   

`ref`를 사용해 변화를 감지해 그에 맞는 화면을 그려내도록 만들 수 있습니다.   

---

## Python
이 프로젝트에서 사용된 Server는 `Python`으로 만든 API 서버이며, `server/main.py`에서 기능을 확장해 사용중입니다.   

### FastAPI과 Uvicorn
API를 매우 빠르고 쉽게 만들 수 있도록 도와주는 최신 웹 프레임워크이다. 적은 코드로 높은 성능을 낼 수 있고, 자동으로 API 문서를 만들어주는 등 편리한 기능이 있다.   

---

`Uvicorn`은 `FastAPI`로 만든 프로그램은 스스로 웹 서버 역할을 할 수 없는데, 이를 비동기 `Python` 웹 프레임워크를 위한 초고속 '웹 서버 게이트웨이' 역할을 한다. 즉, `FastAPI`로 요리한 음식을 손님(웹 브라우저)에게 전달해주는 전문 서버 역할이다.   

---

### `venv` - Python 가상 환경
`server/venv` 폴더가 가상 환경이며, 각 프로젝트마다 사용하는 라이브러리(패키지)의 버전이 다를 수 있는데, 이 때 버전 충돌이 일어나지 않도록 프로젝트별 독립된 '격리된 공간'을 만들어주는 기능이다.   

---

### `server/main.py` - Python API 서버
`FastAPI`를 이용해 만든 실제 API 서버 코드이다. 프론트엔드(Vue)로부터 요청을 받고, 백엔드 로직을 처리하고 그 결과를 다시 프론트엔드로 보내주는 역할을 한다.   

- `app = FastAPI()`: FastAPI 애플리케이션 생성
- `CORSMiddleware`: Vue 개발 서버(예: `http://localhost:5173`)와 Python 서버(예: `http://localhost:8000`)는 서로 다른 주소에서 실행되기 때문에, 기본적으로 보안 정책상 통신이 차단되고, 이 미들웨어는 지정된 주소(Vue 개발 서버)로부터의 요청을 허용해주는 역할 수행

---

### 외부 API 호출 - `httpx` 라이브러리
서버(`FastAPI`)가 외부 서버와 통신하기 위해 HTTP 요청을 보내야 한다. 이 때, `httpx`는 `requests` 라이브러리처럼 HTTP 통신을 쉽게 해주면서 동시에 `async/await`를 지원하여 `FastAPI`와 잘 맞는다. `httpx.AsyncClient()`를 사용해 비동기 방식으로 서버에 POST 요청이 가능하다   

---

## 폴더 구조
- **components**: 버튼, 모달창, 카드 등 재사용 가능한 작은 UI 조각(컴포넌트)들을 모아두는 장소
- **pages**: `Home.vue`, `MoodSelect.vue`처럼 특정 페이지 전체를 구성하는 컴포넌트들을 모아두는 장소
- **composables**: Vue 3의 Composition API에서 사용하는 '재사용 가능한 로직'을 모아두는 장소로 데이터 가져오기, 상태 관리 등 특정 기능과 관련된 스크립트 로직을 함수 형태로 분리하여 여러 컴포넌트에서 쉽게 가져와서 사용 가능
- **constants**: API 주소, UI 메시지, 기분 목록처럼 프로젝트 전반에 걸쳐 변하지 않고 반복적으로 사용되는 '상수' 값들을 모아두는 장소
- **services**: 외부 API와 통신하는 모든 코드를 모아두는 장소로 날씨, 미세먼지, AI 서버 등 각 API별로 파일을 분리하여 관리
- **utils**: 특정 기능에 종속되지 않고 어디서든 사용할 수 있는 작은 도우미 함수(유틸리티)들을 모아두는 장소 (예: 날짜/시간 변환)

---
